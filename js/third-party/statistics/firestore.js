firebase.initializeApp({apiKey:CONFIG.firestore.apiKey,projectId:CONFIG.firestore.projectId});(function(){const e=(e,t)=>e.get().then(o=>{let n=o.exists?o.data().count:0;if(t){n++;e.set({count:n})}return n});const t=e=>t=>{e.innerText=t};const o=firebase.firestore();const n=o.collection(CONFIG.firestore.collection);document.addEventListener("page:loaded",()=>{if(CONFIG.page.isPost){const o=document.querySelector(".post-title").textContent.trim();const r=n.doc(o);let s=CONFIG.hostname===location.hostname;if(localStorage.getItem(o)){s=false}else{localStorage.setItem(o,true)}e(r,s).then(t(document.querySelector(".firestore-visitors-count")))}else if(CONFIG.page.isHome){const o=[...document.querySelectorAll(".post-title")].map(t=>{const o=t.textContent.trim();const r=n.doc(o);return e(r)});Promise.all(o).then(e=>{const o=document.querySelectorAll(".firestore-visitors-count");e.forEach((e,n)=>{t(o[n])(e)})})}})})();